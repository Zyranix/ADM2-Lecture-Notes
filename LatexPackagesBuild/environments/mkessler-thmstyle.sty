%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Copyright © 2021 Maximilian Keßler
% 
% Permission is hereby granted, free of charge, to any person obtaining a copy
% of this software and associated documentation files (the “Software”), to deal
% in the Software without restriction, including without limitation the rights
% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
% copies of the Software, and to permit persons to whom the Software is
% furnished to do so, subject to the following conditions:
% The above copyright notice and this permission notice shall be included in all
% copies or substantial portions of the Software.
% 
% THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
% SOFTWARE.
% 
% This LaTeX package is free software and distributed under the MIT License. You
% may use it freely for your purposes. The latest version of the package can be
% obtained via GitHub under
%    https://github.com/kesslermaximilian/LatexPackages
% For further information see the url above.
% Reportings of bugs, suggestions and improvements are welcome, see the README
% at the Git repository for further information.
% 
% This package has been generated by PyTeX, available at
%    https://github.com/kesslermaximilian/PyTeX
% and built from source file 'thmstyle.pysty'.
% It is STRONGLY DISCOURAGED to edit this source file directly, since local
% changes will not be versioned by Git and overwritten by the next build. Always
% edit the source file and build the package again.
% 
% Build details:
%   Build time: 2021/10/08 18:12
%   PyTeX version: v1.0.0-3 (commit 4409c94)
%   LatexPackages version: v2.1.0-19 (commit 9f183d0)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{mkessler-thmstyle}[2021/10/08 - Mdframed Styles used for fancythm package]


%%%%% This provides easy-to-use styles, especially for use with the 

\RequirePackage{xkeyval}

% A simple option wether to define some default styles
\newif\ifmkessler@thmstyle@defaultstyles\mkessler@thmstyle@defaultstylesfalse
\DeclareOptionX{defaultstyles}{\mkessler@thmstyle@defaultstylestrue}

\DeclareOptionX*{\PackageWarning{mkessler-thmstyle}{Unknown '\CurrentOption'}}
\ProcessOptionsX*\relax


\RequirePackage{amsthm}
\RequirePackage{thmtools}
\RequirePackage{mdframed}
\RequirePackage{xcolor}
\RequirePackage{xparse}
\definecolor{gold}{RGB}{218,165,32}

\mdfsetup{skipabove=8pt,skipbelow=\topskip}

\NewDocumentCommand{\declarefancymdfstyle}{O{} m O{} }{
    \if\relax\detokenize{#1}\relax
        \mdfdefinestyle{\if\relax\detokenize{#3}\relax md#2margin\else #3\fi}{%
            linecolor=#2,
            linewidth = 2pt,
            leftmargin = 0cm,
            rightmargin=0cm,
            rightline=false,
            topline=false,
            bottomline=false
        }
    \else
        \mdfdefinestyle{\if\relax\detokenize{#3}\relax md#2marginand#1fill\else #3\fi}{%
            linecolor=#2,
            linewidth = 2pt,
            leftmargin = 0cm,
            rightmargin=0cm,
            backgroundcolor=#1,
            rightline=false,
            topline=false,
            bottomline=false
        }
    \fi
}

\NewDocumentCommand{\declarefancythmstyle}{O{} m O{} }{
    \declarefancymdfstyle[#1]{#2}
    \if\relax\detokenize{#3}\relax
        \if\relax\detokenize{#1}\relax
            \declaretheoremstyle[
                mdframed={style=
                    \if\relax\detokenize{#1}\relax md#2margin\else md#2marginand#1fill\fi
                    },
                postheadspace={0.3em},
                notefont=\mdseries
            ]{thm#2margin}
        \else
            \declaretheoremstyle[
                mdframed={style=
                    \if\relax\detokenize{#1}\relax md#2margin\else md#2marginand#1fill\fi
                    },
                postheadspace={0.3em},
                notefont=\mdseries
            ]{thm#2marginand#1fill}
        \fi
    \else
        \declaretheoremstyle[
            mdframed={style=
                \if\relax\detokenize{#1}\relax md#2margin\else md#2marginand#1fill\fi
                },
            postheadspace={0.3em},
            notefont=\mdseries
        ]{#3}
    \fi
}

\ifmkessler@thmstyle@defaultstyles
    \declarefancythmstyle[red!8]{red}[thmredmarginandfill]
    \declarefancythmstyle[orange!10]{orange}[thmorangemarginandfill]
    \declarefancythmstyle[blue!7]{blue}[thmbluemarginandfill]
    \declarefancythmstyle{green!70!black}[thmgreenmargin]
    \declarefancythmstyle{gold}[thmgoldmargin]
    \declarefancythmstyle{yellow!80!orange}[thmyellowmargin]
    \declarefancythmstyle{gray}[thmgraymargin]
    \declarefancythmstyle[violet!7]{violet}[thmvioletmarginandfill]
    \declarefancythmstyle{violet}[thmvioletmargin]
    \declarefancythmstyle[blue!7]{red}[thmredmarginbluefill]
    \declarefancythmstyle{red}[thmredmargin]
    \declarefancythmstyle[blue!7]{orange}[thmorangemarginbluefill]
    \declarefancythmstyle[violet!20!gray!20]{black}[thmblackmarginandfill]
    \declarefancythmstyle{black}[thmblackmargin]
\fi
